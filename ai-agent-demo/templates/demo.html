<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Agent Creation Demo - MCP Ecosystem</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        [x-cloak] { display: none !important; }
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .step-indicator {
            transition: all 0.3s ease;
        }
        .step-indicator.active {
            background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
            color: white;
            transform: scale(1.1);
        }
        .step-indicator.completed {
            background: #10b981;
            color: white;
        }
        .demo-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        .pulse {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-purple-50 min-h-screen" x-data="aiAgentDemo()">
    <!-- Header -->
    <header class="gradient-bg text-white shadow-lg">
        <div class="container mx-auto px-6 py-6">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <i class="fas fa-robot text-3xl"></i>
                    <div>
                        <h1 class="text-3xl font-bold">AI Agent Creation Demo</h1>
                        <p class="text-blue-100">Build intelligent agents with MCP ecosystem</p>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <!-- MCP Status Indicators -->
                    <div class="flex items-center space-x-2 bg-white/20 px-4 py-2 rounded-lg">
                        <div class="flex items-center space-x-1">
                            <div :class="mcpStatus.prompt_builder ? 'bg-green-400' : 'bg-red-400'" class="w-2 h-2 rounded-full"></div>
                            <span class="text-sm">Prompt Builder</span>
                        </div>
                        <div class="flex items-center space-x-1">
                            <div :class="mcpStatus.llm_provider ? 'bg-green-400' : 'bg-red-400'" class="w-2 h-2 rounded-full"></div>
                            <span class="text-sm">LLM</span>
                        </div>
                        <div class="flex items-center space-x-1">
                            <div :class="mcpStatus.memory ? 'bg-green-400' : 'bg-red-400'" class="w-2 h-2 rounded-full"></div>
                            <span class="text-sm">Memory</span>
                        </div>
                        <div class="flex items-center space-x-1">
                            <div :class="mcpStatus.sequential_thinker ? 'bg-green-400' : 'bg-red-400'" class="w-2 h-2 rounded-full"></div>
                            <span class="text-sm">Thinking</span>
                        </div>
                    </div>
                    <button @click="checkSystemHealth()" class="bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg text-sm transition">
                        <i class="fas fa-sync-alt"></i> Refresh
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-6 py-8">
        <!-- Progress Sidebar -->
        <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
            <!-- Sidebar -->
            <div class="lg:col-span-1">
                <div class="demo-card rounded-xl p-6 sticky top-8">
                    <h3 class="text-lg font-bold text-gray-800 mb-4">Demo Progress</h3>
                    <div class="space-y-3">
                        <template x-for="(step, index) in demoSteps" :key="step.id">
                            <div class="flex items-center space-x-3">
                                <div :class="getStepIndicatorClass(step.id)" class="step-indicator w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium">
                                    <span x-show="!isStepCompleted(step.id)" x-text="index + 1"></span>
                                    <i x-show="isStepCompleted(step.id)" class="fas fa-check"></i>
                                </div>
                                <div>
                                    <div class="font-medium text-sm" :class="currentStep === step.id ? 'text-blue-600' : 'text-gray-700'" x-text="step.name"></div>
                                    <div class="text-xs text-gray-500" x-text="step.duration_estimate"></div>
                                </div>
                            </div>
                        </template>
                    </div>
                    
                    <!-- Session Info -->
                    <div x-show="sessionId" class="mt-6 pt-4 border-t border-gray-200">
                        <h4 class="font-medium text-gray-800 mb-2">Session Info</h4>
                        <div class="text-sm text-gray-600">
                            <div>ID: <span class="font-mono text-xs" x-text="sessionId"></span></div>
                            <div>Status: <span :class="currentStep === 'agent_created' ? 'text-green-600' : 'text-blue-600'" x-text="getStepName(currentStep)"></span></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Main Demo Area -->
            <div class="lg:col-span-3">
                <!-- Welcome Step -->
                <div x-show="currentStep === 'start'" x-cloak class="demo-card rounded-xl p-8 fade-in">
                    <div class="text-center">
                        <i class="fas fa-rocket text-6xl text-blue-500 mb-6"></i>
                        <h2 class="text-3xl font-bold text-gray-800 mb-4">Welcome to AI Agent Creation</h2>
                        <p class="text-lg text-gray-600 mb-8">
                            Experience the power of the MCP ecosystem by building your own AI agent step by step.
                            This interactive demo will guide you through the complete process from concept to deployment.
                        </p>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                            <div class="bg-blue-50 p-6 rounded-lg">
                                <i class="fas fa-brain text-blue-500 text-2xl mb-3"></i>
                                <h3 class="font-bold text-gray-800 mb-2">Intelligent Design</h3>
                                <p class="text-sm text-gray-600">Use sequential thinking and memory management for smart agent behavior</p>
                            </div>
                            <div class="bg-green-50 p-6 rounded-lg">
                                <i class="fas fa-cogs text-green-500 text-2xl mb-3"></i>
                                <h3 class="font-bold text-gray-800 mb-2">MCP Integration</h3>
                                <p class="text-sm text-gray-600">Leverage multiple MCP servers working together seamlessly</p>
                            </div>
                            <div class="bg-purple-50 p-6 rounded-lg">
                                <i class="fas fa-magic text-purple-500 text-2xl mb-3"></i>
                                <h3 class="font-bold text-gray-800 mb-2">Easy Deployment</h3>
                                <p class="text-sm text-gray-600">Get your AI agent ready for production in minutes</p>
                            </div>
                        </div>

                        <div class="space-y-4">
                            <input 
                                x-model="sessionName" 
                                placeholder="Enter a name for your demo session..."
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            >
                            <button 
                                @click="startDemo()" 
                                :disabled="!sessionName"
                                class="w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 px-8 rounded-lg font-medium hover:from-blue-700 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200"
                            >
                                <i class="fas fa-play mr-2"></i>
                                Start Creating Your AI Agent
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Context Definition Step -->
                <div x-show="currentStep === 'define_context'" x-cloak class="demo-card rounded-xl p-8 fade-in">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">
                        <i class="fas fa-bullseye text-blue-500 mr-3"></i>
                        Step 1: Define Agent Context
                    </h2>
                    <p class="text-gray-600 mb-8">Tell us about your AI agent. What should it do and who is it for?</p>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <!-- Form -->
                        <div class="space-y-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Agent Name *</label>
                                <input 
                                    x-model="agentData.agent_name" 
                                    placeholder="e.g., CustomerCare Pro"
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                >
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Agent Description *</label>
                                <textarea 
                                    x-model="agentData.agent_description" 
                                    placeholder="Describe what your agent does and its key capabilities..."
                                    rows="3"
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                ></textarea>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Domain *</label>
                                <select 
                                    x-model="agentData.domain" 
                                    @change="updateDomainSuggestions()"
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                >
                                    <option value="">Select a domain...</option>
                                    <option value="customer_service">Customer Service</option>
                                    <option value="education">Education & Training</option>
                                    <option value="business_analysis">Business Analysis</option>
                                    <option value="creative_writing">Creative Writing</option>
                                    <option value="technical_support">Technical Support</option>
                                </select>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Use Case *</label>
                                <input 
                                    x-model="agentData.use_case" 
                                    placeholder="e.g., Live chat support, tutoring, data analysis..."
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                >
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Target Audience</label>
                                <select 
                                    x-model="agentData.target_audience" 
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                >
                                    <option value="general">General Public</option>
                                    <option value="technical">Technical Professionals</option>
                                    <option value="business">Business Professionals</option>
                                    <option value="students">Students & Learners</option>
                                    <option value="experts">Domain Experts</option>
                                </select>
                            </div>
                        </div>

                        <!-- Domain Templates -->
                        <div x-show="agentData.domain" class="bg-gray-50 p-6 rounded-lg">
                            <h3 class="font-bold text-gray-800 mb-4">Domain Suggestions</h3>
                            <div x-show="domainInfo">
                                <div class="mb-4">
                                    <div class="flex items-center mb-2">
                                        <i :class="domainInfo.icon" class="mr-2" :style="'color: ' + domainInfo.color"></i>
                                        <span class="font-medium" x-text="domainInfo.name"></span>
                                    </div>
                                    <p class="text-sm text-gray-600" x-text="domainInfo.description"></p>
                                </div>
                                
                                <div class="space-y-2">
                                    <h4 class="font-medium text-gray-700">Common Use Cases:</h4>
                                    <template x-for="useCase in domainInfo.use_cases" :key="useCase.id">
                                        <div class="bg-white p-3 rounded border cursor-pointer hover:border-blue-500 transition" @click="agentData.use_case = useCase.description">
                                            <div class="font-medium text-sm" x-text="useCase.name"></div>
                                            <div class="text-xs text-gray-500" x-text="useCase.description"></div>
                                        </div>
                                    </template>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="mt-8 flex justify-between">
                        <button @click="currentStep = 'start'" class="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition">
                            <i class="fas fa-arrow-left mr-2"></i> Back
                        </button>
                        <button 
                            @click="submitContextStep()" 
                            :disabled="!isContextValid()"
                            class="px-8 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition"
                        >
                            Continue <i class="fas fa-arrow-right ml-2"></i>
                        </button>
                    </div>
                </div>

                <!-- Memory Configuration Step -->
                <div x-show="currentStep === 'configure_memory'" x-cloak class="demo-card rounded-xl p-8 fade-in">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">
                        <i class="fas fa-memory text-green-500 mr-3"></i>
                        Step 2: Configure Memory Settings
                    </h2>
                    <p class="text-gray-600 mb-8">Set up how your agent will remember and manage information across conversations.</p>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div class="space-y-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Memory Type</label>
                                <select 
                                    x-model="memoryConfig.memory_type" 
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                >
                                    <option value="conversation">Conversation Memory</option>
                                    <option value="learning_progress">Learning Progress Memory</option>
                                    <option value="analytical_context">Analytical Context Memory</option>
                                    <option value="creative_context">Creative Context Memory</option>
                                    <option value="technical_context">Technical Context Memory</option>
                                </select>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Memory Size Limit</label>
                                <select 
                                    x-model="memoryConfig.memory_size_limit" 
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                >
                                    <option value="5000">5,000 tokens (Small)</option>
                                    <option value="10000">10,000 tokens (Medium)</option>
                                    <option value="20000">20,000 tokens (Large)</option>
                                    <option value="50000">50,000 tokens (Very Large)</option>
                                </select>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Retention Policy</label>
                                <select 
                                    x-model="memoryConfig.retention_policy" 
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                >
                                    <option value="fifo">First In, First Out (FIFO)</option>
                                    <option value="lifo">Last In, First Out (LIFO)</option>
                                    <option value="importance">Keep Most Important</option>
                                    <option value="recency">Keep Most Recent</option>
                                </select>
                            </div>

                            <div class="space-y-4">
                                <label class="flex items-center">
                                    <input type="checkbox" x-model="memoryConfig.persistence" class="mr-3">
                                    <span class="text-sm font-medium text-gray-700">Enable Persistence</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" x-model="memoryConfig.enable_semantic_search" class="mr-3">
                                    <span class="text-sm font-medium text-gray-700">Enable Semantic Search</span>
                                </label>
                            </div>
                        </div>

                        <div class="bg-gray-50 p-6 rounded-lg">
                            <h3 class="font-bold text-gray-800 mb-4">Memory Configuration Preview</h3>
                            <div class="space-y-3 text-sm">
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Type:</span>
                                    <span class="font-medium" x-text="memoryConfig.memory_type.replace('_', ' ').replace(/\b\w/g, l => l.toUpperCase())"></span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Size Limit:</span>
                                    <span class="font-medium" x-text="memoryConfig.memory_size_limit + ' tokens'"></span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Retention:</span>
                                    <span class="font-medium" x-text="memoryConfig.retention_policy.toUpperCase()"></span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Persistence:</span>
                                    <span class="font-medium" x-text="memoryConfig.persistence ? 'Enabled' : 'Disabled'"></span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Semantic Search:</span>
                                    <span class="font-medium" x-text="memoryConfig.enable_semantic_search ? 'Enabled' : 'Disabled'"></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="mt-8 flex justify-between">
                        <button @click="currentStep = 'define_context'" class="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition">
                            <i class="fas fa-arrow-left mr-2"></i> Back
                        </button>
                        <button 
                            @click="submitMemoryStep()" 
                            class="px-8 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition"
                        >
                            Continue <i class="fas fa-arrow-right ml-2"></i>
                        </button>
                    </div>
                </div>

                <!-- Thinking Configuration Step -->
                <div x-show="currentStep === 'configure_thinking'" x-cloak class="demo-card rounded-xl p-8 fade-in">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">
                        <i class="fas fa-lightbulb text-yellow-500 mr-3"></i>
                        Step 3: Configure Sequential Thinking
                    </h2>
                    <p class="text-gray-600 mb-8">Configure how your agent will reason and think through problems systematically.</p>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div class="space-y-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Thinking Style</label>
                                <select 
                                    x-model="thinkingConfig.thinking_style" 
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                >
                                    <option value="analytical">Analytical Thinking</option>
                                    <option value="creative">Creative Thinking</option>
                                    <option value="empathetic">Empathetic Thinking</option>
                                    <option value="systematic">Systematic Thinking</option>
                                    <option value="pedagogical">Pedagogical Thinking</option>
                                </select>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Thinking Depth</label>
                                <select 
                                    x-model="thinkingConfig.thinking_depth" 
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                >
                                    <option value="surface">Surface Level</option>
                                    <option value="standard">Standard Depth</option>
                                    <option value="detailed">Detailed Analysis</option>
                                    <option value="comprehensive">Comprehensive</option>
                                </select>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Reasoning Steps</label>
                                <input 
                                    type="range" 
                                    min="3" 
                                    max="7" 
                                    x-model="thinkingConfig.reasoning_steps"
                                    class="w-full"
                                >
                                <div class="flex justify-between text-sm text-gray-500 mt-1">
                                    <span>3 steps</span>
                                    <span x-text="thinkingConfig.reasoning_steps + ' steps'"></span>
                                    <span>7 steps</span>
                                </div>
                            </div>

                            <div class="space-y-4">
                                <label class="flex items-center">
                                    <input type="checkbox" x-model="thinkingConfig.enable_chain_of_thought" class="mr-3">
                                    <span class="text-sm font-medium text-gray-700">Enable Chain of Thought</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" x-model="thinkingConfig.enable_self_reflection" class="mr-3">
                                    <span class="text-sm font-medium text-gray-700">Enable Self-Reflection</span>
                                </label>
                            </div>
                        </div>

                        <div class="bg-gray-50 p-6 rounded-lg">
                            <h3 class="font-bold text-gray-800 mb-4">Thinking Configuration Preview</h3>
                            <div class="space-y-3 text-sm">
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Style:</span>
                                    <span class="font-medium" x-text="thinkingConfig.thinking_style.replace('_', ' ').replace(/\b\w/g, l => l.toUpperCase())"></span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Depth:</span>
                                    <span class="font-medium" x-text="thinkingConfig.thinking_depth.replace(/\b\w/g, l => l.toUpperCase())"></span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Steps:</span>
                                    <span class="font-medium" x-text="thinkingConfig.reasoning_steps"></span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Chain of Thought:</span>
                                    <span class="font-medium" x-text="thinkingConfig.enable_chain_of_thought ? 'Enabled' : 'Disabled'"></span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Self-Reflection:</span>
                                    <span class="font-medium" x-text="thinkingConfig.enable_self_reflection ? 'Enabled' : 'Disabled'"></span>
                                </div>
                            </div>

                            <div class="mt-4 p-4 bg-blue-50 rounded border">
                                <h4 class="font-medium text-blue-800 mb-2">Style Characteristics:</h4>
                                <template x-for="characteristic in getThinkingStyleInfo(thinkingConfig.thinking_style).characteristics" :key="characteristic">
                                    <span class="inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded mr-1 mb-1" x-text="characteristic"></span>
                                </template>
                            </div>
                        </div>
                    </div>

                    <div class="mt-8 flex justify-between">
                        <button @click="currentStep = 'configure_memory'" class="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition">
                            <i class="fas fa-arrow-left mr-2"></i> Back
                        </button>
                        <button 
                            @click="submitThinkingStep()" 
                            class="px-8 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition"
                        >
                            Continue <i class="fas fa-arrow-right ml-2"></i>
                        </button>
                    </div>
                </div>

                <!-- Prompt Building Step -->
                <div x-show="currentStep === 'build_prompt'" x-cloak class="demo-card rounded-xl p-8 fade-in">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">
                        <i class="fas fa-magic text-purple-500 mr-3"></i>
                        Step 4: Building Agent Prompt
                    </h2>
                    <p class="text-gray-600 mb-8">Creating your AI agent's comprehensive prompt using all configured settings...</p>

                    <div class="text-center" x-show="building">
                        <div class="inline-flex items-center space-x-3 bg-blue-50 px-6 py-4 rounded-lg">
                            <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>
                            <span class="text-blue-600 font-medium">Building agent prompt...</span>
                        </div>
                    </div>

                    <div x-show="!building && agentPrompt" class="space-y-6">
                        <div class="bg-gray-50 rounded-lg p-6">
                            <h3 class="font-bold text-gray-800 mb-4">Generated Agent Prompt</h3>
                            <pre class="whitespace-pre-wrap text-sm text-gray-700 max-h-96 overflow-y-auto" x-text="agentPrompt"></pre>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="bg-green-50 p-4 rounded-lg">
                                <i class="fas fa-check-circle text-green-500 text-xl mb-2"></i>
                                <h4 class="font-medium text-green-800">Context Integration</h4>
                                <p class="text-sm text-green-600">Agent context successfully integrated</p>
                            </div>
                            <div class="bg-blue-50 p-4 rounded-lg">
                                <i class="fas fa-memory text-blue-500 text-xl mb-2"></i>
                                <h4 class="font-medium text-blue-800">Memory Configured</h4>
                                <p class="text-sm text-blue-600">Memory settings applied</p>
                            </div>
                            <div class="bg-purple-50 p-4 rounded-lg">
                                <i class="fas fa-brain text-purple-500 text-xl mb-2"></i>
                                <h4 class="font-medium text-purple-800">Thinking Ready</h4>
                                <p class="text-sm text-purple-600">Sequential thinking configured</p>
                            </div>
                        </div>

                        <div class="flex justify-between">
                            <button @click="currentStep = 'configure_thinking'" class="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition">
                                <i class="fas fa-arrow-left mr-2"></i> Back
                            </button>
                            <button 
                                @click="createAgent()" 
                                class="px-8 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition"
                            >
                                Create Agent <i class="fas fa-arrow-right ml-2"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Agent Creation & Showcase Step -->
                <div x-show="currentStep === 'agent_created'" x-cloak class="demo-card rounded-xl p-8 fade-in">
                    <div class="text-center mb-8">
                        <i class="fas fa-trophy text-6xl text-gold-500 mb-4 text-yellow-500"></i>
                        <h2 class="text-3xl font-bold text-gray-800 mb-4">🎉 Your AI Agent is Ready!</h2>
                        <p class="text-lg text-gray-600">
                            Congratulations! Your AI agent <strong x-text="createdAgent.agent_name"></strong> has been successfully created and is ready for use.
                        </p>
                    </div>

                    <!-- Agent Information -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
                        <div class="bg-gray-50 p-6 rounded-lg">
                            <h3 class="font-bold text-gray-800 mb-4">Agent Details</h3>
                            <div class="space-y-3 text-sm">
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Name:</span>
                                    <span class="font-medium" x-text="createdAgent.agent_name"></span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">ID:</span>
                                    <span class="font-mono text-xs" x-text="createdAgent.agent_id"></span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Domain:</span>
                                    <span class="font-medium" x-text="agentData.domain.replace('_', ' ').replace(/\b\w/g, l => l.toUpperCase())"></span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Use Case:</span>
                                    <span class="font-medium" x-text="agentData.use_case"></span>
                                </div>
                            </div>
                        </div>

                        <div class="bg-blue-50 p-6 rounded-lg">
                            <h3 class="font-bold text-gray-800 mb-4">Configuration Summary</h3>
                            <div class="space-y-2 text-sm">
                                <div class="flex items-center">
                                    <i class="fas fa-memory text-green-500 mr-2"></i>
                                    <span x-text="memoryConfig.memory_type.replace('_', ' ').replace(/\b\w/g, l => l.toUpperCase())"></span>
                                </div>
                                <div class="flex items-center">
                                    <i class="fas fa-brain text-purple-500 mr-2"></i>
                                    <span x-text="thinkingConfig.thinking_style.replace('_', ' ').replace(/\b\w/g, l => l.toUpperCase())"></span>
                                </div>
                                <div class="flex items-center">
                                    <i class="fas fa-cog text-blue-500 mr-2"></i>
                                    <span x-text="thinkingConfig.reasoning_steps + ' reasoning steps'"></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Test the Agent -->
                    <div class="bg-white border border-gray-200 rounded-lg p-6 mb-8">
                        <h3 class="font-bold text-gray-800 mb-4">
                            <i class="fas fa-comments text-green-500 mr-2"></i>
                            Test Your Agent
                        </h3>
                        
                        <div class="space-y-4">
                            <!-- Test Message -->
                            <div class="bg-blue-50 p-4 rounded-lg">
                                <div class="flex items-start space-x-3">
                                    <i class="fas fa-user text-blue-500 mt-1"></i>
                                    <div>
                                        <div class="font-medium text-blue-800">You</div>
                                        <div class="text-blue-700" x-text="testMessage"></div>
                                    </div>
                                </div>
                            </div>

                            <!-- Agent Response -->
                            <div class="bg-green-50 p-4 rounded-lg">
                                <div class="flex items-start space-x-3">
                                    <i class="fas fa-robot text-green-500 mt-1"></i>
                                    <div>
                                        <div class="font-medium text-green-800" x-text="createdAgent.agent_name"></div>
                                        <div class="text-green-700" x-text="agentResponse"></div>
                                    </div>
                                </div>
                            </div>

                            <!-- Custom Test -->
                            <div class="border-t pt-4">
                                <label class="block text-sm font-medium text-gray-700 mb-2">Try your own message:</label>
                                <div class="flex space-x-3">
                                    <input 
                                        x-model="customTestMessage" 
                                        placeholder="Type a message to test your agent..."
                                        class="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                        @keyup.enter="testCustomMessage()"
                                    >
                                    <button 
                                        @click="testCustomMessage()" 
                                        :disabled="!customTestMessage"
                                        class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition"
                                    >
                                        <i class="fas fa-paper-plane"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Next Steps -->
                    <div class="bg-gradient-to-r from-green-50 to-blue-50 p-6 rounded-lg">
                        <h3 class="font-bold text-gray-800 mb-4">
                            <i class="fas fa-rocket text-green-500 mr-2"></i>
                            What's Next?
                        </h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="bg-white p-4 rounded border">
                                <i class="fas fa-download text-blue-500 text-xl mb-2"></i>
                                <h4 class="font-medium text-gray-800">Export Configuration</h4>
                                <p class="text-sm text-gray-600 mb-3">Download your agent's configuration for deployment</p>
                                <button class="text-blue-600 text-sm hover:underline">Download JSON</button>
                            </div>
                            <div class="bg-white p-4 rounded border">
                                <i class="fas fa-code text-purple-500 text-xl mb-2"></i>
                                <h4 class="font-medium text-gray-800">Integration Code</h4>
                                <p class="text-sm text-gray-600 mb-3">Get code snippets for integrating your agent</p>
                                <button class="text-purple-600 text-sm hover:underline">View Examples</button>
                            </div>
                            <div class="bg-white p-4 rounded border">
                                <i class="fas fa-play text-green-500 text-xl mb-2"></i>
                                <h4 class="font-medium text-gray-800">Deploy Agent</h4>
                                <p class="text-sm text-gray-600 mb-3">Deploy your agent to production environment</p>
                                <button class="text-green-600 text-sm hover:underline">Deploy Now</button>
                            </div>
                        </div>
                    </div>

                    <div class="mt-8 flex justify-between">
                        <button @click="startNewDemo()" class="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition">
                            <i class="fas fa-plus mr-2"></i> Create Another Agent
                        </button>
                        <button @click="finishDemo()" class="px-8 py-2 bg-gradient-to-r from-green-600 to-blue-600 text-white rounded-lg hover:from-green-700 hover:to-blue-700 transition">
                            <i class="fas fa-check mr-2"></i> Finish Demo
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Loading Overlay -->
    <div x-show="loading" x-cloak class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-lg p-8 max-w-sm w-full mx-4">
            <div class="text-center">
                <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"></div>
                <h3 class="text-lg font-medium text-gray-900 mb-2" x-text="loadingMessage"></h3>
                <p class="text-sm text-gray-500">Please wait while we process your request...</p>
            </div>
        </div>
    </div>

    <!-- Success/Error Messages -->
    <div x-show="message" x-cloak class="fixed bottom-4 right-4 z-50 transition-all duration-300" x-transition>
        <div :class="messageType === 'success' ? 'bg-green-500' : 'bg-red-500'" class="text-white px-6 py-3 rounded-lg shadow-lg flex items-center space-x-3">
            <i :class="messageType === 'success' ? 'fas fa-check' : 'fas fa-exclamation-triangle'"></i>
            <span x-text="message"></span>
            <button @click="message = ''" class="text-white hover:text-gray-200">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>

    <script>
        function aiAgentDemo() {
            return {
                // State
                currentStep: 'start',
                sessionId: '',
                sessionName: 'My AI Agent Demo',
                loading: false,
                loadingMessage: '',
                building: false,
                message: '',
                messageType: 'success',
                
                // Demo Steps
                demoSteps: [
                    { id: 'start', name: 'Welcome', duration_estimate: '1 min' },
                    { id: 'define_context', name: 'Define Context', duration_estimate: '2-3 min' },
                    { id: 'configure_memory', name: 'Configure Memory', duration_estimate: '1-2 min' },
                    { id: 'configure_thinking', name: 'Configure Thinking', duration_estimate: '1-2 min' },
                    { id: 'build_prompt', name: 'Build Prompt', duration_estimate: '1-2 min' },
                    { id: 'agent_created', name: 'Agent Created', duration_estimate: '2-3 min' }
                ],
                
                // Configuration Data
                agentData: {
                    agent_name: '',
                    agent_description: '',
                    domain: '',
                    use_case: '',
                    target_audience: 'general',
                    additional_context: ''
                },
                
                memoryConfig: {
                    memory_type: 'conversation',
                    persistence: true,
                    memory_size_limit: 10000,
                    retention_policy: 'fifo',
                    enable_semantic_search: true
                },
                
                thinkingConfig: {
                    thinking_style: 'analytical',
                    enable_chain_of_thought: true,
                    thinking_depth: 'detailed',
                    reasoning_steps: 5,
                    enable_self_reflection: true
                },
                
                // Results
                agentPrompt: '',
                createdAgent: {},
                testMessage: "Hello! Please introduce yourself and explain what you can help me with.",
                agentResponse: '',
                customTestMessage: '',
                
                // MCP Status
                mcpStatus: {
                    prompt_builder: false,
                    llm_provider: false,
                    memory: false,
                    sequential_thinker: false
                },
                
                // Domain Templates
                domainTemplates: {
                    customer_service: {
                        name: "Customer Service",
                        description: "AI agents for customer support and service interactions",
                        icon: "fas fa-headset",
                        color: "#3b82f6",
                        use_cases: [
                            { id: "support_chat", name: "Live Chat Support", description: "Real-time customer support chat assistant" },
                            { id: "faq_assistant", name: "FAQ Assistant", description: "Automated responses to frequently asked questions" },
                            { id: "complaint_handler", name: "Complaint Handler", description: "Specialized agent for handling customer complaints" }
                        ]
                    },
                    education: {
                        name: "Education & Training",
                        description: "AI agents for educational and learning purposes",
                        icon: "fas fa-graduation-cap",
                        color: "#10b981",
                        use_cases: [
                            { id: "tutor", name: "Personal Tutor", description: "One-on-one tutoring and learning assistance" },
                            { id: "course_assistant", name: "Course Assistant", description: "Support for online courses and training programs" },
                            { id: "skill_assessment", name: "Skill Assessment", description: "Evaluate and provide feedback on skills and knowledge" }
                        ]
                    },
                    business_analysis: {
                        name: "Business Analysis",
                        description: "AI agents for business intelligence and data analysis",
                        icon: "fas fa-chart-line",
                        color: "#f59e0b",
                        use_cases: [
                            { id: "data_analyst", name: "Data Analyst", description: "Analyze business data and generate insights" },
                            { id: "report_generator", name: "Report Generator", description: "Create comprehensive business reports" },
                            { id: "strategy_advisor", name: "Strategy Advisor", description: "Provide strategic business recommendations" }
                        ]
                    },
                    creative_writing: {
                        name: "Creative Writing",
                        description: "AI agents for creative content generation and writing",
                        icon: "fas fa-pen-fancy",
                        color: "#8b5cf6",
                        use_cases: [
                            { id: "content_creator", name: "Content Creator", description: "Generate creative content for various media" },
                            { id: "story_writer", name: "Story Writer", description: "Create engaging stories and narratives" },
                            { id: "copywriter", name: "Marketing Copywriter", description: "Write compelling marketing and advertising copy" }
                        ]
                    },
                    technical_support: {
                        name: "Technical Support",
                        description: "AI agents for technical assistance and troubleshooting",
                        icon: "fas fa-tools",
                        color: "#ef4444",
                        use_cases: [
                            { id: "troubleshooter", name: "Technical Troubleshooter", description: "Diagnose and resolve technical issues" },
                            { id: "documentation_helper", name: "Documentation Assistant", description: "Help users understand technical documentation" },
                            { id: "code_reviewer", name: "Code Review Assistant", description: "Review and provide feedback on code" }
                        ]
                    }
                },
                
                domainInfo: null,
                
                thinkingStyles: {
                    analytical: { characteristics: ['data-driven', 'methodical', 'evidence-based'] },
                    creative: { characteristics: ['open-minded', 'divergent', 'original'] },
                    empathetic: { characteristics: ['understanding', 'compassionate', 'person-focused'] },
                    systematic: { characteristics: ['organized', 'thorough', 'process-oriented'] },
                    pedagogical: { characteristics: ['educational', 'patient', 'adaptive'] }
                },

                // Initialize
                init() {
                    this.checkSystemHealth();
                    this.connectWebSocket();
                },

                // WebSocket connection
                connectWebSocket() {
                    const ws = new WebSocket(`ws://${window.location.host}/ws`);
                    
                    ws.onopen = () => {
                        console.log('WebSocket connected');
                        ws.send(JSON.stringify({ type: 'status_request' }));
                    };
                    
                    ws.onmessage = (event) => {
                        const data = JSON.parse(event.data);
                        if (data.type === 'status') {
                            this.mcpStatus = data.mcp_servers;
                        }
                    };
                    
                    ws.onclose = () => {
                        console.log('WebSocket disconnected');
                        setTimeout(() => this.connectWebSocket(), 5000);
                    };
                },

                // System health check
                async checkSystemHealth() {
                    try {
                        const response = await fetch('/api/demo/health');
                        const data = await response.json();
                        this.mcpStatus = data.mcp_servers || {};
                    } catch (error) {
                        console.error('Health check failed:', error);
                    }
                },

                // Demo flow methods
                async startDemo() {
                    if (!this.sessionName.trim()) return;
                    
                    this.setLoading(true, 'Starting demo session...');
                    
                    try {
                        const response = await fetch('/api/demo/start', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({ session_name: this.sessionName })
                        });
                        
                        const data = await response.json();
                        
                        if (data.success) {
                            this.sessionId = data.session_id;
                            this.currentStep = 'define_context';
                            this.showMessage('Demo session started successfully!', 'success');
                        } else {
                            this.showMessage('Failed to start demo session', 'error');
                        }
                    } catch (error) {
                        this.showMessage('Error starting demo: ' + error.message, 'error');
                    }
                    
                    this.setLoading(false);
                },

                async submitContextStep() {
                    if (!this.isContextValid()) return;
                    
                    this.setLoading(true, 'Defining agent context...');
                    
                    try {
                        const response = await fetch('/api/demo/step/context', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                session_id: this.sessionId,
                                ...this.agentData
                            })
                        });
                        
                        const data = await response.json();
                        
                        if (data.success) {
                            this.currentStep = 'configure_memory';
                            this.showMessage('Agent context defined successfully!', 'success');
                        } else {
                            this.showMessage('Failed to define context', 'error');
                        }
                    } catch (error) {
                        this.showMessage('Error defining context: ' + error.message, 'error');
                    }
                    
                    this.setLoading(false);
                },

                async submitMemoryStep() {
                    this.setLoading(true, 'Configuring memory settings...');
                    
                    try {
                        const response = await fetch('/api/demo/step/memory', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                session_id: this.sessionId,
                                ...this.memoryConfig
                            })
                        });
                        
                        const data = await response.json();
                        
                        if (data.success) {
                            this.currentStep = 'configure_thinking';
                            this.showMessage('Memory configuration completed!', 'success');
                        } else {
                            this.showMessage('Failed to configure memory', 'error');
                        }
                    } catch (error) {
                        this.showMessage('Error configuring memory: ' + error.message, 'error');
                    }
                    
                    this.setLoading(false);
                },

                async submitThinkingStep() {
                    this.setLoading(true, 'Configuring sequential thinking...');
                    
                    try {
                        const response = await fetch('/api/demo/step/thinking', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                session_id: this.sessionId,
                                ...this.thinkingConfig
                            })
                        });
                        
                        const data = await response.json();
                        
                        if (data.success) {
                            this.currentStep = 'build_prompt';
                            this.showMessage('Sequential thinking configured!', 'success');
                            this.buildPrompt();
                        } else {
                            this.showMessage('Failed to configure thinking', 'error');
                        }
                    } catch (error) {
                        this.showMessage('Error configuring thinking: ' + error.message, 'error');
                    }
                    
                    this.setLoading(false);
                },

                async buildPrompt() {
                    this.building = true;
                    
                    try {
                        const response = await fetch('/api/demo/step/prompt', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                session_id: this.sessionId,
                                prompt_type: 'conversational',
                                include_examples: true,
                                optimization_goals: ['clarity', 'accuracy']
                            })
                        });
                        
                        const data = await response.json();
                        
                        if (data.success) {
                            this.agentPrompt = data.agent_prompt;
                            this.showMessage('Agent prompt built successfully!', 'success');
                        } else {
                            this.showMessage('Failed to build prompt', 'error');
                        }
                    } catch (error) {
                        this.showMessage('Error building prompt: ' + error.message, 'error');
                    }
                    
                    this.building = false;
                },

                async createAgent() {
                    this.setLoading(true, 'Creating AI agent...');
                    
                    try {
                        const response = await fetch('/api/demo/step/agent', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                session_id: this.sessionId,
                                test_message: this.testMessage
                            })
                        });
                        
                        const data = await response.json();
                        
                        if (data.success) {
                            this.createdAgent = data;
                            this.agentResponse = data.test_response;
                            this.currentStep = 'agent_created';
                            this.showMessage('AI Agent created successfully!', 'success');
                        } else {
                            this.showMessage('Failed to create agent', 'error');
                        }
                    } catch (error) {
                        this.showMessage('Error creating agent: ' + error.message, 'error');
                    }
                    
                    this.setLoading(false);
                },

                async testCustomMessage() {
                    if (!this.customTestMessage.trim()) return;
                    
                    // Simulate agent response for demo
                    const responses = [
                        "Thank you for that question! Let me think through this step by step using my configured reasoning approach...",
                        "I understand what you're asking. Based on my training and memory, here's how I can help...",
                        "That's an interesting point. Using my analytical thinking style, I would approach this by...",
                        "I appreciate you testing my capabilities! As configured, I can assist with..."
                    ];
                    
                    this.agentResponse = responses[Math.floor(Math.random() * responses.length)];
                    this.testMessage = this.customTestMessage;
                    this.customTestMessage = '';
                },

                // Helper methods
                updateDomainSuggestions() {
                    this.domainInfo = this.domainTemplates[this.agentData.domain] || null;
                },

                getStepIndicatorClass(stepId) {
                    if (this.isStepCompleted(stepId)) {
                        return 'step-indicator completed';
                    } else if (this.currentStep === stepId) {
                        return 'step-indicator active';
                    } else {
                        return 'step-indicator bg-gray-200 text-gray-600';
                    }
                },

                isStepCompleted(stepId) {
                    const stepOrder = ['start', 'define_context', 'configure_memory', 'configure_thinking', 'build_prompt', 'agent_created'];
                    const currentIndex = stepOrder.indexOf(this.currentStep);
                    const stepIndex = stepOrder.indexOf(stepId);
                    return stepIndex < currentIndex;
                },

                getStepName(stepId) {
                    const step = this.demoSteps.find(s => s.id === stepId);
                    return step ? step.name : stepId;
                },

                isContextValid() {
                    return this.agentData.agent_name.trim() && 
                           this.agentData.agent_description.trim() && 
                           this.agentData.domain && 
                           this.agentData.use_case.trim();
                },

                getThinkingStyleInfo(style) {
                    return this.thinkingStyles[style] || { characteristics: [] };
                },

                setLoading(loading, message = '') {
                    this.loading = loading;
                    this.loadingMessage = message;
                },

                showMessage(message, type = 'success') {
                    this.message = message;
                    this.messageType = type;
                    setTimeout(() => { this.message = ''; }, 5000);
                },

                startNewDemo() {
                    // Reset all data
                    this.currentStep = 'start';
                    this.sessionId = '';
                    this.sessionName = 'My AI Agent Demo';
                    this.agentData = {
                        agent_name: '',
                        agent_description: '',
                        domain: '',
                        use_case: '',
                        target_audience: 'general',
                        additional_context: ''
                    };
                    this.memoryConfig = {
                        memory_type: 'conversation',
                        persistence: true,
                        memory_size_limit: 10000,
                        retention_policy: 'fifo',
                        enable_semantic_search: true
                    };
                    this.thinkingConfig = {
                        thinking_style: 'analytical',
                        enable_chain_of_thought: true,
                        thinking_depth: 'detailed',
                        reasoning_steps: 5,
                        enable_self_reflection: true
                    };
                    this.agentPrompt = '';
                    this.createdAgent = {};
                    this.domainInfo = null;
                },

                finishDemo() {
                    this.showMessage('Thank you for trying the AI Agent Creation Demo!', 'success');
                }
            }
        }
    </script>
</body>
</html>